<?xml version="1.0"?>
<schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd">
  <table name="retailops_inventory_history" resource="default" engine="innodb" comment="retailops_inventory_history">
    <column xsi:type="int" name="id" padding="11" unsigned="false" nullable="false" identity="true" comment="ID"/>
    <column xsi:type="int" name="product_id" padding="11" unsigned="false" nullable="false" identity="false" comment="Product id"/>
    <column xsi:type="decimal" name="inventory_arrived" scale="4" precision="12" unsigned="false" nullable="true" comment="Inventory that send from brige"/>
    <column xsi:type="decimal" name="inventory_in_shop" scale="4" precision="12" unsigned="false" nullable="true" comment="Inventory in shop before update stock by rics"/>
    <column xsi:type="varchar" name="operator" nullable="true" length="1" comment="+/-"/>
    <column xsi:type="decimal" name="inventory_add" scale="4" precision="12" unsigned="false" nullable="true" comment="Module of invetory items from bridge"/>
    <column xsi:type="timestamp" name="date_create" on_update="false" nullable="false" default="CURRENT_TIMESTAMP" comment="Date Create"/>
    <column xsi:type="varchar" name="real_count" nullable="false" length="255" default="0" comment="Real count from RO"/>
    <column xsi:type="varchar" name="reserve_count" nullable="false" length="255" default="0" comment="Rererve by script"/>
    <constraint xsi:type="primary" referenceId="PRIMARY">
      <column name="id"/>
    </constraint>
  </table>
  <table name="sales_order" resource="default">
    <column xsi:type="boolean" name="retailops_send_status" nullable="false" comment="RetailOps order status"/>
    <column xsi:type="varchar" name="retailops_order_id" nullable="false" length="255" comment="RetailOps order id"/>
  </table>
  <table name="sales_order_grid" resource="default">
    <column xsi:type="boolean" name="retailops_send_status" nullable="false" comment="RetailOPs order status"/>
    <column xsi:type="varchar" name="retailops_order_id" nullable="false" length="255" comment="RetailOps order id"/>
  </table>
  <table name="retailops_order_logger" resource="default" engine="innodb" comment="Retail ops order status history">
    <column xsi:type="int" name="entity_id" padding="10" unsigned="true" nullable="false" identity="true" comment="ID"/>
    <column xsi:type="int" name="parent_id" padding="10" unsigned="true" nullable="false" identity="false" comment="Email"/>
    <column xsi:type="text" name="comment" nullable="true" comment="Comment"/>
    <column xsi:type="varchar" name="status" nullable="true" length="32" comment="Status"/>
    <column xsi:type="timestamp" name="created_at" on_update="false" nullable="true" comment="Created At"/>
    <constraint xsi:type="primary" referenceId="PRIMARY">
      <column name="entity_id"/>
    </constraint>
    <index referenceId="RETAILOPS_ORDER_STATUS_HISTORY_PARENT_ID" indexType="btree">
      <column name="parent_id"/>
    </index>
    <index referenceId="RETAILOPS_ORDER_STATUS_HISTORY_CREATED_AT" indexType="btree">
      <column name="created_at"/>
    </index>
    <index referenceId="RETAILOPS_ORDER_STATUS_HISTORY_STATUS" indexType="btree">
      <column name="status"/>
    </index>
  </table>
  <table name="retailops_order_status_history" resource="default" engine="innodb" comment="retailops_order_status_history">
    <column xsi:type="int" name="entity_id" padding="10" unsigned="true" nullable="false" identity="true" comment="ID"/>
    <column xsi:type="text" name="request" nullable="true" comment="Logger post data request"/>
    <column xsi:type="text" name="response" nullable="true" comment="Logger response"/>
    <column xsi:type="varchar" name="status" nullable="true" length="255" comment="Status"/>
    <column xsi:type="text" name="error" nullable="true" comment="Log exception, if exists"/>
    <column xsi:type="varchar" name="url" nullable="true" length="255" comment="Url request"/>
    <column xsi:type="timestamp" name="create_date" on_update="false" nullable="true" comment="Date create time"/>
    <constraint xsi:type="primary" referenceId="PRIMARY">
      <column name="entity_id"/>
    </constraint>
  </table>
  <table name="retailops_rics_retailops_link_upc" resource="default" engine="innodb" comment="retailops_rics_retailops_link_upc">
    <column xsi:type="int" name="entity_id" padding="11" unsigned="false" nullable="false" identity="true" comment="ID"/>
    <column xsi:type="varchar" name="rics_integration_id" nullable="true" length="255" comment="ID"/>
    <column xsi:type="varchar" name="upc" nullable="true" length="255" comment="Upc's from rics"/>
    <column xsi:type="smallint" name="retail_ops_upc" padding="6" unsigned="false" nullable="true" identity="false" comment="Upc which use in retail_ops system, boolean"/>
    <column xsi:type="timestamp" name="created_at" on_update="false" nullable="false" default="CURRENT_TIMESTAMP" comment="Created At"/>
    <column xsi:type="timestamp" name="update_at" on_update="true" nullable="false" default="CURRENT_TIMESTAMP" comment="Update at"/>
    <constraint xsi:type="primary" referenceId="PRIMARY">
      <column name="entity_id"/>
    </constraint>
    <constraint xsi:type="unique" referenceId="RICS_INTEGRATION_ID_RICS_INTEGRATION_ID_UPC_RETAIL_OPS_UPC">
      <column name="rics_integration_id"/>
      <column name="upc"/>
      <column name="retail_ops_upc"/>
    </constraint>
    <index referenceId="UPC_UPC" indexType="btree">
      <column name="upc"/>
    </index>
    <index referenceId="RICS_INTEGRATION_ID_RICS_INTEGRATION_ID" indexType="btree">
      <column name="rics_integration_id"/>
    </index>
  </table>
  <table name="retailops_api_queue" resource="default" engine="innodb" comment="retailops_api_queue">
    <column xsi:type="int" name="retailops_api_queue_id" padding="10" unsigned="true" nullable="false" identity="true" comment="Entity ID"/>
    <column xsi:type="text" name="message" nullable="true" comment="Message"/>
    <column xsi:type="timestamp" name="creation_time" on_update="false" nullable="false" default="CURRENT_TIMESTAMP" comment="Creation Time"/>
    <column xsi:type="timestamp" name="update_time" on_update="true" nullable="false" default="CURRENT_TIMESTAMP" comment="Modification Time"/>
    <column xsi:type="smallint" name="is_active" padding="6" unsigned="false" nullable="false" identity="false" default="1" comment="Is Active"/>
    <column xsi:type="int" name="queue_type" padding="11" unsigned="false" nullable="false" identity="false" default="1" comment="Type of queue(cancel and e.t.c.)"/>
    <column xsi:type="varchar" name="order_increment_id" nullable="true" length="255" comment="Order increment id"/>
    <constraint xsi:type="primary" referenceId="PRIMARY">
      <column name="retailops_api_queue_id"/>
    </constraint>
  </table>
</schema>
